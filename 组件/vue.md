## 使用组件的原因 

作用： 提高代码的复用性。

## 组件的使用方法：

1. 全局注册：
   ```
   Vue.component('my-component',{
     template: '<div>这是全局注册组件</div>'
   })
   //使用组件
   <my-component></my-component>
   ```
   优点： 所有的Vue实例都可用;
   缺点：权限太大，容错率降低。
   注意点：全局注册的组件一定要定义在所有的Vue实例之前。
2. 局部注册：
   ```
   var app = new Vue({
     el: '#app',
     components: {
       'my-component': {
         template: '<div>这是局部注册组件</div>'
       }
     }
   })
   ```
3. Vue组件的模板在某些情况下会受到HTML标签的限制，比如在`<table></table>`中只能还有`<tr></tr>,<td></td>`这些元素，所以直接在`<table></table>`中使用组件是无效的，此时可以使用**is属性**来挂载组件。
   ```
   <table>
    <tbody is = "my-component></tbody>
   </table>
   ```

## 组件的使用注意事项，奇技淫巧

- 组件的命名规则`小写字母 + -`;
- `template`中的内容必须使用DOM元素包裹，DOM元素可以嵌套；
- 在组件中，除了`template`之外，还可以使用`data,computed,methods`等选项;
- `data`在组件中使用时，必须是一个方法，因此每个实例可以维护一份被返回对象的独立的拷贝。
- 组件的复用
  ```
  <div>
    <div id="components-demo">
    <button-counter></button-counter>
    <button-counter></button-counter>
    <button-counter></button-counter>
  </div>
  ```
  **注意当点击按钮时，每个组件都会各自独立维护它的`count`。因为你每用一次组件，就会有一个它的新实例被创建。**

# 组件通信

组件通信可以分为：父子组件通信，兄弟组件通信，跨级组件通信

### 父亲想儿子传递数据，使用`props`

1. 在组件中，使用`props`来从父亲组件接受参数，注意：**在props中定义的属性都可以在组建中直接使用。**
2. `props`的值有两种，一种是字符串数组，一种是对象。
3. 在`props`中声明的数据，与在组件`data函数`中`return`数据的区别：
  - `props`中数据的选项来自父级
  在父组件中给子组件定义的数据就叫做来自父组件的数据。
  - `data函数`中的数据是来自组件自己的。
  - 这两种情况数据的作用域就是组件本身。
4. 父组件给子组件动态的传递数据，使用`v-bind`。
  
### 单项数据流

- 解释： 通过`props`传递数据是单向的，也就是父组件数据变化时会传递给子组件，但是反过来不行。
- 目的： 尽可能将父子组件解稿，避免了子组件无意中修改了父组件的状态。
- 应用场景：业务中经常遇到两种需要改变`prop`的情况
  1. 一种是父组件传递初始值进来，子组件将它作为初始值保存起来，在自己的作用域下可以随意使用和修改，这种情况可以在组件`data`中在声明一个数据，引用父组件的`prop`
  2. 另一种情况就是`prop`作为需要被转变的原始数值传入，这种情况用计算属性就可以了。
   
### Vue组件的命名方式

1. 在html中，`myMessage`和`mymessage`是一致的，因此在组件中的html中使用且必须使用短横线的命名方式。
2. 在组件中，父组件给子组件传递数据必须使用短横线，在`template`中，必须使用驼峰命名方式。若为短横线命名方式，则会报错。
3. 在组件的`data`中，用`this.xxx`引用时，只能是驼峰命名方式，若为短横线，则报错。
   
### 自定义事件---子组件给父组件传递数据

- 使用`v-on`除了监听DOM事件外，还可以用于组件之间的自定义事件。
- 子组件使用`$emit()`来触发事件，父组件使用`$on()`来监听事件
- 步骤：
  1. 自定义事件(在子组件标签上自定义事件)
  2. 在子组件中使用`$emit()`触发事件，第一个参数是事件名，后面的参数是要传递的数据`this.emit('change',this.count)`
  3. 在自定义事件中使用参数来接受`value`。

### 在组件中，使用v-model

`$emit()`的代码，这行代码实际上会触发一个`input`事件，`input`后的参数就是传递给`v-model`绑定的属性值。
- `v-model`其实一个语法糖，这背后其实做了两个操作
  1. `v-bind`绑定一个`value`属性
  2. `v-on`指令给当前元素绑定`input`事件
- 使用`v-model`要做到：
  1. 接受一个`value`属性
  2. 在有新的`value`时触发`input`事件。
**v-model，其实就是绑定了input事件，当触发input时候，input事件就会自动接受传递过来的参数，并赋值给已经绑定的total**

### 非父组件之间的通信

有时候，两个组件也需要通信（非父子关系）,在简单的场景下，可以使用一个空的`Vue实例`作为中央事件总线。
访问父组件:`this.$root`


  

  

